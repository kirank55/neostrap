{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "neocarousel",
  "type": "registry:ui",
  "title": "NeoCarousel",
  "description": "Carousel component with autoplay, indicators, and keyboard navigation.",
  "dependencies": [
    "embla-carousel-react",
    "lucide-react"
  ],
  "registryDependencies": [
    "utils",
    "button"
  ],
  "files": [
    {
      "path": "components/ui/NeoCarousel.tsx",
      "type": "registry:ui",
      "content": "import * as React from \"react\";\r\nimport useEmblaCarousel, {\r\n  type UseEmblaCarouselType,\r\n} from \"embla-carousel-react\";\r\nimport { ArrowLeft, ArrowRight } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ntype CarouselApi = UseEmblaCarouselType[1];\r\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>;\r\ntype CarouselOptions = UseCarouselParameters[0];\r\ntype CarouselPlugin = UseCarouselParameters[1];\r\n\r\n// Exported props interface extends HTML attributes so JSX recognizes custom props\r\nexport interface CarouselProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  opts?: CarouselOptions;\r\n  plugins?: CarouselPlugin;\r\n  orientation?: \"horizontal\" | \"vertical\";\r\n  setApi?: (api: CarouselApi) => void;\r\n  autoplay?: boolean;\r\n  interval?: number;\r\n  indicatorType?: \"horizontal\" | \"vertical\";\r\n  loop?: boolean;\r\n}\r\n\r\ntype CarouselContextProps = {\r\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0];\r\n  api: ReturnType<typeof useEmblaCarousel>[1];\r\n  scrollPrev: () => void;\r\n  scrollNext: () => void;\r\n  canScrollPrev: boolean;\r\n  canScrollNext: boolean;\r\n  selectedIndex: number;\r\n  slideCount: number;\r\n  scrollTo: (index: number) => void;\r\n} & CarouselProps;\r\n\r\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null);\r\n\r\nfunction useCarousel() {\r\n  const context = React.useContext(CarouselContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useCarousel must be used within a <Carousel />\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\nconst Carousel = React.forwardRef<HTMLDivElement, CarouselProps>(\r\n  (\r\n    {\r\n      orientation = \"horizontal\",\r\n      opts,\r\n      setApi,\r\n      plugins,\r\n      className,\r\n      children,\r\n      autoplay = false,\r\n      interval = 3000,\r\n      loop,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const [carouselRef, api] = useEmblaCarousel(\r\n      {\r\n        ...opts,\r\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\r\n        // ensure carousel loops when autoplay is enabled; top-level `loop` prop takes precedence over `opts.loop`\r\n        loop: autoplay ? true : loop ?? opts?.loop,\r\n      },\r\n      plugins\r\n    );\r\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false);\r\n    const [canScrollNext, setCanScrollNext] = React.useState(false);\r\n    const [selectedIndex, setSelectedIndex] = React.useState(0);\r\n    const [slideCount, setSlideCount] = React.useState(0);\r\n\r\n    const scrollTo = React.useCallback(\r\n      (index: number) => api?.scrollTo(index),\r\n      [api]\r\n    );\r\n\r\n    // Autoplay refs/state\r\n    const autoplayTimer = React.useRef<number | null>(null);\r\n    const interactionRef = React.useRef(false);\r\n\r\n    const clearAutoplay = React.useCallback(() => {\r\n      if (autoplayTimer.current !== null) {\r\n        window.clearInterval(autoplayTimer.current);\r\n        autoplayTimer.current = null;\r\n      }\r\n    }, []);\r\n\r\n    const startAutoplay = React.useCallback(() => {\r\n      clearAutoplay();\r\n      if (!api || !autoplay) return;\r\n      autoplayTimer.current = window.setInterval(() => {\r\n        api?.scrollNext();\r\n      }, interval);\r\n    }, [api, autoplay, interval, clearAutoplay]);\r\n\r\n    const pauseAutoplay = React.useCallback(() => {\r\n      interactionRef.current = true;\r\n      clearAutoplay();\r\n    }, [clearAutoplay]);\r\n\r\n    const resumeAutoplay = React.useCallback(() => {\r\n      interactionRef.current = false;\r\n      if (autoplay) startAutoplay();\r\n    }, [autoplay, startAutoplay]);\r\n\r\n    // Pause when page is hidden, resume when visible\r\n    React.useEffect(() => {\r\n      function onVisibility() {\r\n        if (document.hidden) {\r\n          clearAutoplay();\r\n        } else {\r\n          if (!interactionRef.current) startAutoplay();\r\n        }\r\n      }\r\n      document.addEventListener(\"visibilitychange\", onVisibility);\r\n      return () =>\r\n        document.removeEventListener(\"visibilitychange\", onVisibility);\r\n    }, [startAutoplay, clearAutoplay]);\r\n\r\n    // Start/stop autoplay on api/autoplay/interval changes\r\n    React.useEffect(() => {\r\n      if (!api) return;\r\n      clearAutoplay();\r\n      if (autoplay && !interactionRef.current) {\r\n        startAutoplay();\r\n      }\r\n      return () => clearAutoplay();\r\n    }, [api, autoplay, interval, startAutoplay, clearAutoplay]);\r\n\r\n    const onSelect = React.useCallback((api: CarouselApi) => {\r\n      if (!api) return;\r\n\r\n      setCanScrollPrev(api.canScrollPrev());\r\n      setCanScrollNext(api.canScrollNext());\r\n      setSelectedIndex(api.selectedScrollSnap());\r\n      setSlideCount(api.scrollSnapList().length);\r\n    }, []);\r\n\r\n    const scrollPrev = React.useCallback(() => {\r\n      api?.scrollPrev();\r\n    }, [api]);\r\n\r\n    const scrollNext = React.useCallback(() => {\r\n      api?.scrollNext();\r\n    }, [api]);\r\n\r\n    const handleKeyDown = React.useCallback(\r\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n        if (event.key === \"ArrowLeft\") {\r\n          event.preventDefault();\r\n          scrollPrev();\r\n        } else if (event.key === \"ArrowRight\") {\r\n          event.preventDefault();\r\n          scrollNext();\r\n        }\r\n      },\r\n      [scrollPrev, scrollNext]\r\n    );\r\n\r\n    React.useEffect(() => {\r\n      if (!api || !setApi) {\r\n        return;\r\n      }\r\n\r\n      setApi(api);\r\n    }, [api, setApi]);\r\n\r\n    React.useEffect(() => {\r\n      if (!api) {\r\n        return;\r\n      }\r\n\r\n      onSelect(api);\r\n      api.on(\"reInit\", onSelect);\r\n      api.on(\"select\", onSelect);\r\n\r\n      return () => {\r\n        api?.off(\"select\", onSelect);\r\n      };\r\n    }, [api, onSelect]);\r\n\r\n    React.useEffect(() => {\r\n      if (!api) return;\r\n      const shouldLoop =\r\n        Boolean(autoplay) || Boolean(loop) || Boolean(opts?.loop);\r\n      api.reInit({\r\n        ...opts,\r\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\r\n        loop: shouldLoop,\r\n      });\r\n    }, [api, autoplay, opts, orientation]);\r\n\r\n    return (\r\n      <CarouselContext.Provider\r\n        value={{\r\n          carouselRef,\r\n          api: api,\r\n          opts,\r\n          orientation:\r\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\r\n          scrollPrev,\r\n          scrollNext,\r\n          canScrollPrev,\r\n          canScrollNext,\r\n          selectedIndex,\r\n          slideCount,\r\n          scrollTo,\r\n          autoplay,\r\n          interval,\r\n          loop,\r\n        }}\r\n      >\r\n        <div\r\n          ref={ref}\r\n          onKeyDownCapture={handleKeyDown}\r\n          onMouseEnter={pauseAutoplay}\r\n          onMouseLeave={resumeAutoplay}\r\n          onPointerDownCapture={pauseAutoplay}\r\n          onPointerUpCapture={resumeAutoplay}\r\n          onFocusCapture={pauseAutoplay}\r\n          onBlurCapture={resumeAutoplay}\r\n          className={cn(\"relative\", className)}\r\n          role=\"region\"\r\n          aria-roledescription=\"carousel\"\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </CarouselContext.Provider>\r\n    );\r\n  }\r\n);\r\nCarousel.displayName = \"Carousel\";\r\n\r\ninterface CarouselContentProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  minHeight?: string;\r\n}\r\n\r\nconst CarouselContent = React.forwardRef<HTMLDivElement, CarouselContentProps>(\r\n  ({ className, minHeight, ...props }, ref) => {\r\n    const { carouselRef, orientation } = useCarousel();\r\n\r\n    return (\r\n      <div ref={carouselRef} className=\"overflow-hidden w-full\">\r\n        <div\r\n          ref={ref}\r\n          className={cn(\r\n            \"flex\",\r\n            orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\r\n            className\r\n          )}\r\n          style={{ minHeight }}\r\n          {...props}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n);\r\nCarouselContent.displayName = \"CarouselContent\";\r\n\r\ninterface CarouselItemProps extends React.HTMLAttributes<HTMLDivElement> { }\r\n\r\nconst CarouselItem = React.forwardRef<HTMLDivElement, CarouselItemProps>(\r\n  ({ className, ...props }, ref) => {\r\n    const { orientation } = useCarousel();\r\n\r\n    // Slide item\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        role=\"group\"\r\n        aria-roledescription=\"slide\"\r\n        className={cn(\r\n          \"min-w-0 shrink-0 grow-0 basis-full\",\r\n          orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nCarouselItem.displayName = \"CarouselItem\";\r\n\r\nconst CarouselPrevious = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\r\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel();\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant={variant}\r\n      size={size}\r\n      className={cn(\r\n        \"absolute h-8 w-8 rounded-full\",\r\n        orientation === \"horizontal\"\r\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\r\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\r\n        className\r\n      )}\r\n      disabled={!canScrollPrev}\r\n      onClick={scrollPrev}\r\n      {...props}\r\n    >\r\n      <ArrowLeft className=\"h-4 w-4\" />\r\n      <span className=\"sr-only\">Previous slide</span>\r\n    </Button>\r\n  );\r\n});\r\nCarouselPrevious.displayName = \"CarouselPrevious\";\r\n\r\nconst CarouselNext = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\r\n  const { orientation, scrollNext, canScrollNext } = useCarousel();\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant={variant}\r\n      size={size}\r\n      className={cn(\r\n        \"absolute h-8 w-8 rounded-full\",\r\n        orientation === \"horizontal\"\r\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\r\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\r\n        className\r\n      )}\r\n      disabled={!canScrollNext}\r\n      onClick={scrollNext}\r\n      {...props}\r\n    >\r\n      <ArrowRight className=\"h-4 w-4\" />\r\n      <span className=\"sr-only\">Next slide</span>\r\n    </Button>\r\n  );\r\n});\r\nCarouselNext.displayName = \"CarouselNext\";\r\n\r\ntype IndicatorVariant = \"bullets\" | \"content\";\r\n\r\ninterface SlideContent {\r\n  headline: string;\r\n  description?: string;\r\n}\r\n\r\ninterface CarouselIndicatorsProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  variant?: IndicatorVariant;\r\n  indicatorType?: \"horizontal\" | \"vertical\";\r\n  indicatorColor?: string;\r\n  slides?: SlideContent[];\r\n}\r\n\r\nconst CarouselIndicators = React.forwardRef<\r\n  HTMLDivElement,\r\n  CarouselIndicatorsProps\r\n>(\r\n  (\r\n    {\r\n      className,\r\n      variant = \"bullets\",\r\n      indicatorType = \"horizontal\",\r\n      indicatorColor = \"#FE5BD6\",\r\n      slides = [],\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const { slideCount, selectedIndex, scrollTo, autoplay, interval } =\r\n      useCarousel();\r\n\r\n    const [mounted, setMounted] = React.useState(false);\r\n\r\n    React.useEffect(() => {\r\n      const timer = setTimeout(() => {\r\n        setMounted(true);\r\n      }, 100);\r\n      return () => clearTimeout(timer);\r\n    }, []);\r\n\r\n    if (!slideCount || slideCount <= 1) return null;\r\n\r\n    // Bullets variant - dots centered below carousel\r\n    if (variant === \"bullets\") {\r\n      return (\r\n        <div\r\n          ref={ref}\r\n          className={cn(\"flex gap-2 justify-center\", className)}\r\n          {...props}\r\n        >\r\n          {Array.from({ length: slideCount }).map((_, i) => (\r\n            <button\r\n              key={i}\r\n              type=\"button\"\r\n              aria-label={`Go to slide ${i + 1}`}\r\n              aria-pressed={selectedIndex === i}\r\n              className={cn(\r\n                \"h-2 w-2 rounded-full transition-colors translate-y-3 cursor-pointer\"\r\n              )}\r\n              style={{\r\n                backgroundColor:\r\n                  selectedIndex === i ? indicatorColor : \"#e2e8f0\",\r\n              }}\r\n              onClick={() => scrollTo(i)}\r\n            />\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Content variant - headline & paragraph on the left side\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={cn(\"flex flex-col gap-2 justify-between\", className)}\r\n        {...props}\r\n      >\r\n        {slides.map((slide, i) => (\r\n          <button\r\n            key={i}\r\n            type=\"button\"\r\n            aria-label={`Go to slide ${i + 1}`}\r\n            aria-pressed={selectedIndex === i}\r\n            className={cn(\"text-left p-3 rounded-lg transition-all relative\")}\r\n            onClick={() => scrollTo(i)}\r\n          >\r\n            <h4 className={cn(\"font-bold text-sm transition-colors\")}>\r\n              {slide.headline}\r\n            </h4>\r\n            {slide.description && (\r\n              <p\r\n                className={cn(\r\n                  \"text-xs mt-1 overflow-hidden transition-all ease-in-out duration-300\",\r\n                  selectedIndex === i ? \"max-h-24  py-2\" : \"max-h-0 py-0\"\r\n                )}\r\n                style={{\r\n                  opacity: selectedIndex === i ? 1 : 0,\r\n                }}\r\n              >\r\n                {slide.description}\r\n              </p>\r\n            )}\r\n\r\n            {/* Red progress bar at bottom */}\r\n            {indicatorType === \"horizontal\" && (\r\n              <div className=\"mt-3 h-1 w-full bg-slate-200 rounded-full overflow-hidden\">\r\n                <div\r\n                  aria-hidden\r\n                  className=\"h-full\"\r\n                  style={{\r\n                    backgroundColor:\r\n                      selectedIndex === i ? indicatorColor : \"#e2e8f0\",\r\n                    width: mounted && selectedIndex === i && autoplay ? \"100%\" : \"0%\",\r\n                    transitionProperty: \"width\",\r\n                    transitionDuration:\r\n                      selectedIndex === i && autoplay ? `${interval}ms` : \"0ms\",\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n            {/* Vertical progress bar on left (animates top â†’ bottom) */}\r\n            {indicatorType === \"vertical\" && (\r\n              <div\r\n                aria-hidden\r\n                className=\"absolute left-0 top-0 bottom-0 w-1 bg-slate-200 rounded overflow-hidden\"\r\n              >\r\n                <div\r\n                  className={`w-full`}\r\n                  style={{\r\n                    backgroundColor:\r\n                      selectedIndex === i ? indicatorColor : \"#e2e8f0\",\r\n                    height: mounted && selectedIndex === i && autoplay ? \"100%\" : \"0%\",\r\n                    transitionProperty: \"height\",\r\n                    transitionDuration:\r\n                      selectedIndex === i && autoplay ? `${interval}ms` : \"0ms\",\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n);\r\nCarouselIndicators.displayName = \"CarouselIndicators\";\r\n\r\nexport {\r\n  type CarouselApi,\r\n  type IndicatorVariant,\r\n  type SlideContent,\r\n  Carousel,\r\n  CarouselContent,\r\n  CarouselItem,\r\n  CarouselPrevious,\r\n  CarouselNext,\r\n  CarouselIndicators,\r\n};\r\n"
    }
  ]
}