{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "neotabs",
  "type": "registry:ui",
  "title": "NeoTabs",
  "description": "Neo-brutalist tabs component with GSAP animations.",
  "dependencies": [
    "@radix-ui/react-tabs",
    "gsap",
    "@gsap/react"
  ],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "components/ui/NeoTabs.tsx",
      "type": "registry:ui",
      "content": "import * as React from \"react\";\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\r\nimport gsap from \"gsap\";\r\nimport { useGSAP } from \"@gsap/react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n// Register GSAP plugin\r\ngsap.registerPlugin(useGSAP);\r\n\r\ntype TabsContextType = {\r\n  value: string;\r\n  tabOrder: string[];\r\n  registerTab: (value: string) => void;\r\n  registerTriggerRef: (value: string, ref: HTMLButtonElement | null) => void;\r\n  triggerRefs: Map<string, HTMLButtonElement | null>;\r\n};\r\n\r\nconst TabsContext = React.createContext<TabsContextType | null>(null);\r\nconst CarouselContext = React.createContext<{\r\n  isCarousel: boolean;\r\n  panelCount: number;\r\n}>({ isCarousel: false, panelCount: 0 });\r\n\r\nconst NeoTabs = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Root>\r\n>(\r\n  (\r\n    { value: controlledValue, defaultValue, onValueChange, children, ...props },\r\n    ref\r\n  ) => {\r\n    const [internalValue, setInternalValue] = React.useState(\r\n      controlledValue || defaultValue || \"\"\r\n    );\r\n    const tabOrderRef = React.useRef<string[]>([]);\r\n    const triggerRefsMap = React.useRef<Map<string, HTMLButtonElement | null>>(\r\n      new Map()\r\n    );\r\n\r\n    const currentValue = controlledValue ?? internalValue;\r\n\r\n    const handleValueChange = (newValue: string) => {\r\n      setInternalValue(newValue);\r\n      onValueChange?.(newValue);\r\n    };\r\n\r\n    const registerTab = React.useCallback((value: string) => {\r\n      if (!tabOrderRef.current.includes(value)) {\r\n        tabOrderRef.current.push(value);\r\n      }\r\n    }, []);\r\n\r\n    const registerTriggerRef = React.useCallback(\r\n      (value: string, ref: HTMLButtonElement | null) => {\r\n        triggerRefsMap.current.set(value, ref);\r\n      },\r\n      []\r\n    );\r\n\r\n    return (\r\n      <TabsContext.Provider\r\n        value={{\r\n          value: currentValue,\r\n          tabOrder: tabOrderRef.current,\r\n          registerTab,\r\n          registerTriggerRef,\r\n          triggerRefs: triggerRefsMap.current,\r\n        }}\r\n      >\r\n        <TabsPrimitive.Root\r\n          ref={ref}\r\n          value={controlledValue}\r\n          defaultValue={defaultValue}\r\n          onValueChange={handleValueChange}\r\n          {...props}\r\n        >\r\n            {children}\r\n        </TabsPrimitive.Root>\r\n      </TabsContext.Provider>\r\n    );\r\n  }\r\n);\r\nNeoTabs.displayName = \"NeoTabs\";\r\n\r\nconst NeoTabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => {\r\n  const context = React.useContext(TabsContext);\r\n  const containerRef = React.useRef<HTMLDivElement>(null);\r\n  const indicatorRef = React.useRef<HTMLDivElement>(null);\r\n  const [isInitialized, setIsInitialized] = React.useState(false);\r\n\r\n  // Initialize indicator position after first render\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setIsInitialized(true);\r\n    }, 50);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  useGSAP(\r\n    () => {\r\n      if (!indicatorRef.current || !context || !containerRef.current) return;\r\n\r\n      const { value, triggerRefs } = context;\r\n      const activeRef = triggerRefs.get(value);\r\n\r\n      if (!activeRef) return;\r\n\r\n      const containerRect = containerRef.current.getBoundingClientRect();\r\n      const activeRect = activeRef.getBoundingClientRect();\r\n\r\n      gsap.to(indicatorRef.current, {\r\n        left: activeRect.left - containerRect.left,\r\n        top: activeRect.top - containerRect.top,\r\n        width: activeRect.width,\r\n        height: activeRect.height,\r\n        duration: isInitialized ? 0.5 : 0,\r\n        ease: \"power2.out\",\r\n      });\r\n    },\r\n    { dependencies: [context?.value, isInitialized], scope: containerRef }\r\n  );\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"relative\">\r\n      {/* Animated background indicator */}\r\n      <div\r\n        ref={indicatorRef}\r\n        className=\"absolute bg-(--color-pink) rounded-lg z-20 pointer-events-none mix-blend-multiply\"\r\n        style={{ width: 0, height: 0, left: 0, top: 0 }}\r\n      />\r\n      <TabsPrimitive.List\r\n        ref={ref}\r\n        className={cn(\r\n          \"relative inline-flex items-center justify-center gap-2 rounded-lg bg-inherit p-1.5 border-0 border-black\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n});\r\nNeoTabsList.displayName = TabsPrimitive.List.displayName;\r\n\r\nconst NeoTabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, value, ...props }, ref) => {\r\n  const context = React.useContext(TabsContext);\r\n  const triggerRef = React.useRef<HTMLButtonElement>(null);\r\n\r\n  // Register trigger ref on mount\r\n  React.useEffect(() => {\r\n    if (value && context?.registerTriggerRef) {\r\n      context.registerTriggerRef(value, triggerRef.current);\r\n    }\r\n    return () => {\r\n      if (value && context?.registerTriggerRef) {\r\n        context.registerTriggerRef(value, null);\r\n      }\r\n    };\r\n  }, [value, context]);\r\n\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      ref={(node) => {\r\n        triggerRef.current = node;\r\n        if (typeof ref === \"function\") ref(node);\r\n        else if (ref) ref.current = node;\r\n      }}\r\n      value={value}\r\n      className={cn(\r\n        \"relative inline-flex items-center justify-center whitespace-nowrap rounded-lg px-4 py-2 text-sm font-semibold transition-all z-10\",\r\n        \"outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n        \"disabled:pointer-events-none disabled:opacity-50\",\r\n        \"data-[state=inactive]:bg-transparent data-[state=inactive]:text-black\",\r\n        \"data-[state=inactive]:border-2 data-[state=inactive]:border-black\",\r\n        \"data-[state=inactive]:shadow-[5px_5px_0_#000]\",\r\n        // \"data-[state=inactive]:hover:-translate-y-[-5px] data-[state=inactive]:hover:translate-x-1.25 data-[state=inactive]:hover:shadow-none\",\r\n        \"data-[state=inactive]:active:translate-x-px data-[state=inactive]:active:-translate-y-px data-[state=inactive]:active:shadow-[2px_2px_0_#000]\",\r\n        \"data-[state=active]:bg-transparent data-[state=active]:text-black\",\r\n        \"data-[state=active]:border-2 data-[state=active]:border-black\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nNeoTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\r\n\r\ninterface NeoTabsCarouselProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * Carousel wrapper for NeoTabsContent components.\r\n * Wraps all tab content in a horizontally scrolling track animated by GSAP.\r\n */\r\nconst NeoTabsCarousel = ({ children, className }: NeoTabsCarouselProps) => {\r\n  const context = React.useContext(TabsContext);\r\n  const containerRef = React.useRef<HTMLDivElement>(null);\r\n  const trackRef = React.useRef<HTMLDivElement>(null);\r\n\r\n  // Count the number of tab panels\r\n  const panelCount = React.Children.count(children);\r\n\r\n  const [isInitialized, setIsInitialized] = React.useState(false);\r\n\r\n  // Initialize after first render\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setIsInitialized(true);\r\n    }, 50);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  useGSAP(\r\n    () => {\r\n      if (!trackRef.current || !context || panelCount === 0) return;\r\n\r\n      const { value, tabOrder } = context;\r\n      const currentIndex = tabOrder.indexOf(value);\r\n\r\n      if (currentIndex === -1) return;\r\n\r\n      const panelWidth = 100 / panelCount;\r\n\r\n      // Get all content panels\r\n      const panels = trackRef.current.querySelectorAll(\"[data-content-panel]\");\r\n\r\n      if (isInitialized) {\r\n        const tl = gsap.timeline();\r\n\r\n        // Scale down and fade out content while starting to slide\r\n        tl.to(\r\n          panels,\r\n          {\r\n            scale: 0.8,\r\n            opacity: 0,\r\n            duration: 0.3,\r\n            ease: \"power2.in\",\r\n          },\r\n          0\r\n        )\r\n          .to(\r\n            trackRef.current,\r\n            {\r\n              xPercent: -(currentIndex * panelWidth),\r\n              duration: 0.5,\r\n              ease: \"power2.inOut\",\r\n            },\r\n            0\r\n          )\r\n          // Scale up and fade in new content\r\n          .to(\r\n            panels,\r\n            {\r\n              scale: 1,\r\n              opacity: 1,\r\n              duration: 0.3,\r\n              ease: \"power2.out\",\r\n            },\r\n            0.3\r\n          );\r\n      } else {\r\n        gsap.set(trackRef.current, {\r\n          xPercent: -(currentIndex * panelWidth),\r\n        });\r\n      }\r\n    },\r\n    {\r\n      dependencies: [context?.value, panelCount, isInitialized],\r\n      scope: containerRef,\r\n    }\r\n  );\r\n\r\n  return (\r\n    <CarouselContext.Provider value={{ isCarousel: true, panelCount }}>\r\n      <div\r\n        ref={containerRef}\r\n        className={cn(\r\n          \"mt-4 overflow-hidden border-2 border-black rounded-lg shadow-[4px_4px_0_#000] bg-(--color-pink)\",\r\n          className\r\n        )}\r\n      >\r\n        <div\r\n          ref={trackRef}\r\n          className=\"flex\"\r\n          style={{ width: `${panelCount * 100}%` }}\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </CarouselContext.Provider>\r\n  );\r\n};\r\nNeoTabsCarousel.displayName = \"NeoTabsCarousel\";\r\n\r\nconst NeoTabsContent = React.forwardRef<\r\n  React.ComponentRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, value, children, ...props }, ref) => {\r\n  const context = React.useContext(TabsContext);\r\n  const { isCarousel, panelCount } = React.useContext(CarouselContext);\r\n  const isActive = context?.value === value;\r\n\r\n  // Register this tab value on mount\r\n  React.useEffect(() => {\r\n    if (value && context?.registerTab) {\r\n      context.registerTab(value);\r\n    }\r\n  }, [value, context]);\r\n\r\n  return (\r\n    <TabsPrimitive.Content\r\n      ref={ref}\r\n      value={value}\r\n      forceMount={isCarousel ? true : props.forceMount}\r\n      data-content-panel\r\n      className={cn(\r\n        \"shrink-0 ring-offset-background p-4\",\r\n        \"outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n        // Carousel uses overflow-hidden to manage visibility\r\n        !isCarousel && \"w-full\",\r\n        className\r\n      )}\r\n      style={\r\n        isCarousel && panelCount > 0\r\n          ? { width: `${100 / panelCount}%` }\r\n          : undefined\r\n      }\r\n      aria-hidden={!isActive}\r\n      tabIndex={isActive ? 0 : -1}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </TabsPrimitive.Content>\r\n  );\r\n});\r\nNeoTabsContent.displayName = TabsPrimitive.Content.displayName;\r\n\r\nexport {\r\n  NeoTabs,\r\n  NeoTabsList,\r\n  NeoTabsTrigger,\r\n  NeoTabsContent,\r\n  NeoTabsCarousel,\r\n};\r\n"
    }
  ]
}