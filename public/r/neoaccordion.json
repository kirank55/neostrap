{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "neoaccordion",
  "type": "registry:ui",
  "title": "NeoAccordion",
  "description": "Neo-brutalist accordion component with collapsible sections.",
  "dependencies": [
    "@radix-ui/react-accordion",
    "class-variance-authority",
    "lucide-react"
  ],
  "registryDependencies": [
    "utils"
  ],
  "cssVars": {
    "theme": {
      "--animate-accordion-down": "accordion-down 0.2s ease-out",
      "--animate-accordion-up": "accordion-up 0.2s ease-out"
    }
  },
  "css": {
    "@keyframes accordion-down": {
      "from": "height: 0;",
      "to": "height: var(--radix-accordion-content-height);"
    },
    "@keyframes accordion-up": {
      "from": "height: var(--radix-accordion-content-height);",
      "to": "height: 0;"
    }
  },
  "files": [
    {
      "path": "components/ui/NeoAccordion.tsx",
      "type": "registry:ui",
      "content": "import * as React from \"react\"\r\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\r\nimport { ChevronDown } from \"lucide-react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst baseStyle = \"border-2 border-black\"\r\nconst brutalShadow = \"shadow-[4px_4px_0_#000]\"\r\n\r\nconst accordionVariants = cva(\"w-full\", {\r\n  variants: {\r\n    variant: {\r\n      brutal: \"\",\r\n      outline: \"\",\r\n    },\r\n  },\r\n  defaultVariants: {\r\n    variant: \"brutal\",\r\n  },\r\n})\r\n\r\nconst accordionItemVariants = cva(\r\n  \"overflow-hidden transition-all\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        brutal: `bg-[var(--primary)] ${baseStyle} ${brutalShadow} first:rounded-t-lg last:rounded-b-lg [&:not(:last-child)]:border-b-0`,\r\n        outline: `bg-white ${baseStyle} [&:not(:last-child)]:border-b-0`,\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"brutal\",\r\n    },\r\n  }\r\n)\r\n\r\nconst accordionTriggerVariants = cva(\r\n  \"flex flex-1 items-center justify-between py-4 px-5 text-left font-semibold transition-all [&[data-state=open]>svg]:rotate-180\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        brutal: \"hover:bg-black/5 text-black\",\r\n        outline: \"hover:bg-black/5 text-black\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"brutal\",\r\n    },\r\n  }\r\n)\r\n\r\nconst accordionContentVariants = cva(\r\n  \"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        brutal: \"bg-white/50 border-t-2 border-black\",\r\n        outline: \"bg-gray-50 border-t-2 border-black\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"brutal\",\r\n    },\r\n  }\r\n)\r\n\r\n// Context provided to items so they can know whether any item is open and whether\r\n// a given item (by value) is currently open. This lets the item compute its own\r\n// `dimmed` state based on the accordion state instead of relying on the demo.\r\nconst AccordionContext = React.createContext<{\r\n  anyOpen: boolean\r\n  isItemOpen: (value?: string) => boolean\r\n} | null>(null)\r\n\r\n/**\r\n * Defines the visual style of the accordion.\r\n * - `brutal`: High contrast, neo-brutalist style with heavy borders and shadows.\r\n * - `outline`: Clean, minimalist outline style.\r\n */\r\ntype AccordionVariant = \"brutal\" | \"outline\"\r\n\r\ntype NeoAccordionProps = React.ComponentProps<typeof AccordionPrimitive.Root> &\r\n  VariantProps<typeof accordionVariants>\r\n\r\n/**\r\n * The root container for the accordion.\r\n * Manages the state and behavior of the accordion items.\r\n *\r\n * @example\r\n * <NeoAccordion type=\"single\" collapsible>\r\n *   <NeoAccordionItem value=\"item-1\">\r\n *     <NeoAccordionTrigger>Is it accessible?</NeoAccordionTrigger>\r\n *     <NeoAccordionContent>Yes.</NeoAccordionContent>\r\n *   </NeoAccordionItem>\r\n * </NeoAccordion>\r\n */\r\nfunction NeoAccordion({\r\n  className,\r\n  variant = \"brutal\",\r\n  ...props\r\n}: NeoAccordionProps) {\r\n  // Extract a few props we need to observe so we can compute `anyOpen` and expose\r\n  // a helper to items. We support both controlled and uncontrolled usage by\r\n  // syncing controlled value when provided and updating local state on changes.\r\n  const { type } = props as any\r\n  const controlledValue = (props as any).value as string | string[] | undefined\r\n  const defaultValue = (props as any).defaultValue as string | string[] | undefined\r\n  const userOnValueChange = (props as any).onValueChange as ((v: string | string[] | undefined) => void) | undefined\r\n\r\n  const [value, setValue] = React.useState<string | string[] | undefined>(\r\n    controlledValue ?? defaultValue ?? undefined\r\n  )\r\n\r\n  React.useEffect(() => {\r\n    if (controlledValue !== undefined) setValue(controlledValue)\r\n  }, [controlledValue])\r\n\r\n  const handleValueChange = (val: string | string[] | undefined) => {\r\n    setValue(val)\r\n    userOnValueChange?.(val)\r\n  }\r\n\r\n  const anyOpen = type === \"multiple\" ? Array.isArray(value) && value.length > 0 : !!value\r\n\r\n  const isItemOpen = (itemValue?: string) => {\r\n    if (type === \"multiple\") {\r\n      return Array.isArray(value) && !!itemValue && (value as string[]).includes(itemValue)\r\n    }\r\n\r\n    return !!(itemValue && value === itemValue)\r\n  }\r\n\r\n  // Provide correctly-typed props to Radix depending on whether this is a\r\n  // single or multiple accordion. This avoids passing a union type that\r\n  // doesn't satisfy Radix's discriminated union types.\r\n  const isMultiple = type === \"multiple\"\r\n  const currentValue = controlledValue ?? value\r\n\r\n  // Omit props that could carry the wrong `value` type when spreading into\r\n  // Radix's Root. We use `rest` for the spread to avoid leaking the original\r\n  // union-typed `value`/`onValueChange` which can break the discriminated union.\r\n  const { value: _v, onValueChange: _onValueChange, defaultValue: _dv, ...rest } = props as any\r\n\r\n  if (isMultiple) {\r\n    const multipleValue = Array.isArray(currentValue) ? (currentValue as string[]) : undefined\r\n    const onMultipleChange = (v: string[] | undefined) => handleValueChange(v)\r\n\r\n    return (\r\n      <AccordionPrimitive.Root\r\n        data-slot=\"accordion\"\r\n        data-variant={variant}\r\n        className={cn(accordionVariants({ variant, className }))}\r\n        type=\"multiple\"\r\n        value={multipleValue}\r\n        onValueChange={onMultipleChange as any}\r\n        {...rest}\r\n      >\r\n        <AccordionContext.Provider value={{ anyOpen, isItemOpen }}>\r\n          {props.children}\r\n        </AccordionContext.Provider>\r\n      </AccordionPrimitive.Root>\r\n    )\r\n  }\r\n\r\n  const singleValue = typeof currentValue === \"string\" ? (currentValue as string) : undefined\r\n  const onSingleChange = (v: string | undefined) => handleValueChange(v)\r\n\r\n  return (\r\n    <AccordionPrimitive.Root\r\n      data-slot=\"accordion\"\r\n      data-variant={variant}\r\n      className={cn(accordionVariants({ variant, className }))}\r\n      type=\"single\"\r\n      value={singleValue}\r\n      onValueChange={onSingleChange as any}\r\n      {...rest}\r\n    >\r\n      <AccordionContext.Provider value={{ anyOpen, isItemOpen }}>\r\n        {props.children}\r\n      </AccordionContext.Provider>\r\n    </AccordionPrimitive.Root>\r\n  )\r\n}\r\n\r\ntype NeoAccordionItemProps = React.ComponentProps<typeof AccordionPrimitive.Item> & {\r\n  variant?: AccordionVariant\r\n  /**\r\n   * The `value` of the item as used by the Accordion. Optional but available here\r\n   * so items can determine whether they're the currently-open one.\r\n   */\r\n  value?: string\r\n  /**\r\n   * When true, this item is not the active/open item while another item is open.\r\n   * If not provided, the item will compute its own dimmed state from the\r\n   * Accordion's context (preferred).\r\n   */\r\n  dimmed?: boolean\r\n}\r\n\r\n/**\r\n * An individual item within the accordion.\r\n * Contains the header (trigger) and content.\r\n */\r\nfunction NeoAccordionItem({ className, variant = \"brutal\", dimmed, value, ...props }: NeoAccordionItemProps) {\r\n  const ctx = React.useContext(AccordionContext)\r\n\r\n  const computedDimmed =\r\n    typeof dimmed === \"boolean\" ? dimmed : !!(ctx && ctx.anyOpen && !ctx.isItemOpen(value))\r\n\r\n  return (\r\n    <AccordionPrimitive.Item\r\n      data-slot=\"accordion-item\"\r\n      data-dimmed={computedDimmed ? \"true\" : undefined}\r\n      value={value}\r\n      className={cn(\r\n        accordionItemVariants({ variant, className }),\r\n        computedDimmed ? \" [&_button]:px-5 [&_button]:py-0.5\" : \"\"\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\ntype NeoAccordionTriggerProps = React.ComponentProps<typeof AccordionPrimitive.Trigger> & {\r\n  variant?: AccordionVariant\r\n}\r\n\r\n/**\r\n * The clickable header that toggles the accordion content.\r\n * Includes a chevron icon that rotates based on state.\r\n */\r\nfunction NeoAccordionTrigger({\r\n  className,\r\n  children,\r\n  variant = \"brutal\",\r\n  ...props\r\n}: NeoAccordionTriggerProps) {\r\n  return (\r\n    <AccordionPrimitive.Header className=\"flex\">\r\n      <AccordionPrimitive.Trigger\r\n        data-slot=\"accordion-trigger\"\r\n        className={cn(accordionTriggerVariants({ variant, className }))}\r\n        {...props}\r\n      >\r\n        {children}\r\n        <ChevronDown className=\"size-5 shrink-0 transition-transform duration-200\" />\r\n      </AccordionPrimitive.Trigger>\r\n    </AccordionPrimitive.Header>\r\n  )\r\n}\r\n\r\ntype NeoAccordionContentProps = React.ComponentProps<typeof AccordionPrimitive.Content> & {\r\n  variant?: AccordionVariant\r\n}\r\n\r\n/**\r\n * The collapsible content section associated with an item.\r\n * Animates height when opening/closing.\r\n */\r\nfunction NeoAccordionContent({\r\n  className,\r\n  children,\r\n  variant = \"brutal\",\r\n  ...props\r\n}: NeoAccordionContentProps) {\r\n  return (\r\n    <AccordionPrimitive.Content\r\n      data-slot=\"accordion-content\"\r\n      className={cn(accordionContentVariants({ variant, className }))}\r\n      {...props}\r\n    >\r\n      <div className=\"px-5 py-4\">{children}</div>\r\n    </AccordionPrimitive.Content>\r\n  )\r\n}\r\n\r\nexport {\r\n  NeoAccordion,\r\n  NeoAccordionItem,\r\n  NeoAccordionTrigger,\r\n  NeoAccordionContent,\r\n}\r\n\r\nexport type {\r\n  NeoAccordionProps,\r\n  NeoAccordionItemProps,\r\n  NeoAccordionTriggerProps,\r\n  NeoAccordionContentProps,\r\n}\r\n\r\nexport const variantOptions = [\r\n  { variant: \"brutal\", label: \"Brutal\" },\r\n  { variant: \"outline\", label: \"Outline\" },\r\n] as const\r\n\r\nexport const behaviorOptions = [\r\n  { type: \"single\", label: \"Single open\", collapsible: true },\r\n  { type: \"multiple\", label: \"Multiple open\" },\r\n  { type: \"single\", label: \"Non-Collapsible\", collapsible: false, defaultValue: \"item-1\" },\r\n  { type: \"single\", label: \"Default Open\", collapsible: true, defaultValue: \"item-1\" },\r\n] as const\r\n"
    }
  ]
}